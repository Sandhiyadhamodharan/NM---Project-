;/*FB_PKG_DELIM*/

__d("WAWebChannelDiscoveryVisibilityTrackingWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChannelDirectoryPillSelected","WAWebWamEnumChannelEventUnit","WAWebWamEnumTsSurface"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({ChannelDiscoveryVisibilityTracking:[5766,{channelCategoryIndex:[1,a.TYPES.INTEGER],channelCategoryName:[2,a.TYPES.STRING],channelDirectorySessionId:[3,a.TYPES.INTEGER],channelEventUnit:[4,d("WAWebWamEnumChannelEventUnit").CHANNEL_EVENT_UNIT],channelIndex:[5,a.TYPES.INTEGER],cid:[6,a.TYPES.STRING],countrySelector:[7,a.TYPES.STRING],discoverySurface:[8,d("WAWebWamEnumTsSurface").TS_SURFACE],isSubImpression:[16,a.TYPES.BOOLEAN],pillSelected:[11,d("WAWebWamEnumChannelDirectoryPillSelected").CHANNEL_DIRECTORY_PILL_SELECTED],similarChannelsSessionId:[13,a.TYPES.INTEGER],unifiedSessionId:[14,a.TYPES.STRING],updatesTabSessionId:[17,a.TYPES.INTEGER]},[1,1,1],"regular"]},{ChannelDiscoveryVisibilityTracking:[]});g.ChannelDiscoveryVisibilityTrackingWamEvent=b}),98);
__d("WAWebChannelMessageVisibilityTrackingWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({ChannelMessageVisibilityTracking:[5998,{cid:[1,a.TYPES.STRING],isStarredPost:[8,a.TYPES.BOOLEAN],isVpvImpression:[7,a.TYPES.BOOLEAN],postId:[4,a.TYPES.STRING],unifiedSessionId:[6,a.TYPES.STRING]},[1,1,1],"regular"]},{ChannelMessageVisibilityTracking:[]});g.ChannelMessageVisibilityTrackingWamEvent=b}),98);
__d("WAWebMerlinImpressionManager",["MerlinImpressionManager","WAWebChannelDiscoveryVisibilityTrackingWamEvent","WAWebChannelMessageVisibilityTrackingWamEvent","WAWebNewsletterGatingUtils","WAWebUnifiedSession"],(function(a,b,c,d,e,f,g){"use strict";var h={};function a(a){var b=a.enter_ts,c=a.exit_ts,e=a.itemId;a=a.visibilityData;var f=a.cid,g=a.isStarredPost,i=a.isVpvImpression,j=a.postId;if(!d("WAWebNewsletterGatingUtils").isNewsletterVPVMessageVisibilityLoggingEnabled())return;a=function(){var a;a=new(d("WAWebChannelMessageVisibilityTrackingWamEvent").ChannelMessageVisibilityTrackingWamEvent)({cid:f,isStarredPost:g,isVpvImpression:i,postId:j,unifiedSessionId:(a=d("WAWebUnifiedSession").UnifiedSessionManager.getSessionId())!=null?a:void 0});a.commit()};d("MerlinImpressionManager").logVisibilityTimestamps(b,c,e,h,a)}function b(a){var b=a.enter_ts,c=a.exit_ts,e=a.itemId;a=a.discoveryData;var f=a.cid,g=a.newsletterDirectorySessionId,i=a.similarNewslettersSessionId,j=a.newsletterDirectorySectionIndex,k=a.newsletterIndex,l=a.newsletterEventUnit,m=a.pillSelected,n=a.country,o=a.newsletterDirectorySectionName,p=a.discoverySurface;if(!d("WAWebNewsletterGatingUtils").isVPVLoggingEnabled()||!d("WAWebNewsletterGatingUtils").isNewsletterVPVLoggingEnabled())return;a=function(){var a;a=new(d("WAWebChannelDiscoveryVisibilityTrackingWamEvent").ChannelDiscoveryVisibilityTrackingWamEvent)({cid:f,channelDirectorySessionId:g,similarChannelsSessionId:i,channelCategoryIndex:j,channelIndex:k,channelEventUnit:l,pillSelected:m,countrySelector:n,channelCategoryName:o,discoverySurface:p,unifiedSessionId:(a=d("WAWebUnifiedSession").UnifiedSessionManager.getSessionId())!=null?a:void 0});a.commit()};d("MerlinImpressionManager").logVisibilityTimestamps(b,c,e,h,a)}g.logNewsletterMessageVisibility=a;g.logNewsletterDiscoveryVisibility=b}),98);
__d("WAWebNewsletterQuickFollowButton.react",["fbt","WAWebFlex.react","WAWebFollowNewsletter","WAWebKeyboardHotKeys.react","WAWebModalManager","WAWebNewsletterUnsubscribeAction","WAWebSpinner.react","WAWebText.react","WAWebToast.react","WAWebToastManager","WAWebUISpacing","WAWebUnfollowNewsletterConfirmationModal.react","WAWebUnstyledButton.react","react","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||c("react"),l=(i||(i=d("react"))).useState,m={followButton:{boxSizing:"x9f619",$$css:!0},withBorder:{backgroundColor:"xlwc9sh",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",borderTopColor:"xiuubft",borderEndColor:"xa2vszz",borderBottomColor:"xx5tys9",borderStartColor:"x5iuykv",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopStartRadius:"xfkn95n",borderTopEndRadius:"xly138o",borderBottomEndRadius:"xchwasx",borderBottomStartRadius:"xfxlei4",":hover_boxShadow":"xv52azi",$$css:!0}};function a(a){var b=a.confirmUnfollow,e=a.following,f=a.hasBorder;f=f===void 0?!1:f;var g=a.loggingOptions,i=a.newsletter,j=a.onFollowAction,n=a.onFollowSuccess,o=a.onUnfollowAction;a=a.ref;var p=l(!1),q=p[0],r=p[1],s=c("useWAWebUnmountSignal")(),t=function(){s.aborted||r(!1)},u=function(a){d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{msg:a,visibile:!1}))};p=function(a){a.preventDefault();a.stopPropagation();r(!0);if(!e){j==null?void 0:j();d("WAWebFollowNewsletter").followDirectoryNewsletter(i,g).then(function(){n==null?void 0:n(),u(h._(/*BTDS*/"__JHASH__UxtaXwUXTZj__JHASH__",[h._param("channelName",i.name)]))})["finally"](function(){return t()});return}o==null?void 0:o();if(b){d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebUnfollowNewsletterConfirmationModal.react").UnfollowNewsletterConfirmationModal,{chat:i,loggingOptions:g,onClose:function(){return t()}}));return}d("WAWebNewsletterUnsubscribeAction").unsubscribeFromNewsletterAction(i,babelHelpers["extends"]({deleteLocalModels:!1},g)).then(function(){u(d("WAWebUnfollowNewsletterConfirmationModal.react").getUnfollowNewsletterAnnouncement(i))})["finally"](t)};var v={enter:p,space:p},w=e?h._(/*BTDS*/"__JHASH__q2OJx1NjUKp__JHASH__"):h._(/*BTDS*/"__JHASH__fwxpTAEyfpc__JHASH__");return k.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{handlers:v,children:k.jsx(c("WAWebUnstyledButton.react"),{testid:void 0,ref:a,onClick:p,xstyle:[m.followButton,f&&m.withBorder],children:k.jsx(d("WAWebFlex.react").FlexRow,{align:"center",justify:"center",xstyle:[d("WAWebUISpacing").uiPadding.vert10,d("WAWebUISpacing").uiPadding.horiz16],children:q?k.jsx(d("WAWebSpinner.react").Spinner,{color:"highlight",size:16}):k.jsx(d("WAWebText.react").WAWebTextSectionTitle,{color:e?"secondary":"teal",children:w})})})})}a.displayName=a.name+" [from "+f.id+"]";g.NewsletterQuickFollowButton=a}),226);
__d("useWAWebNewsletterDiscoveryVisibilityLogger",["WAWebMerlinImpressionManager","react","useVPVDImpression"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useState;function a(a){var b=a.cid,e=a.newsletterDirectorySessionId,f=a.similarNewslettersSessionId,g=a.newsletterDirectorySectionIndex,h=a.newsletterIndex,k=a.newsletterEventUnit,l=a.pillSelected,m=a.country,n=a.newsletterDirectorySectionName,o=a.discoverySurface;a=j();var p=a[0],q=a[1];a=j();var r=a[0],s=a[1];a=i(function(){q(l),s(m)},[m,l]);var t=i(function(a){var c=a.hiddenTime;a=a.visibleTime;d("WAWebMerlinImpressionManager").logNewsletterDiscoveryVisibility({enter_ts:a,exit_ts:c,itemId:JSON.stringify({channel_id:b,discovery_surface:o,pillSelected:p,country:r}),discoveryData:{cid:b,newsletterDirectorySessionId:e,similarNewslettersSessionId:f,newsletterDirectorySectionIndex:g,newsletterIndex:h,newsletterEventUnit:k,pillSelected:(a=p)!=null?a:void 0,country:(c=r)!=null?c:void 0,newsletterDirectorySectionName:n,discoverySurface:o}})},[n,e,k,b,r,o,p,g,f,h]);return c("useVPVDImpression")({onVPVDEnd:t,onVPVDStart:a})}g["default"]=a}),98);